services:
  frontend:
    build:
      context: ./app  # Vérifie que ce chemin correspond bien à ton projet
      dockerfile: Dockerfile
    ports:
      - "80:3000"
    image: stephb421/buildesp-app:latest
    volumes:
      - ./app:/app  # Monte le dossier app correctement
      - /app/node_modules  # Empêche l'écrasement de node_modules dans le conteneur
    working_dir: /app  # Définit le répertoire de travail
    environment:
      - CHOKIDAR_USEPOLLING=true # Assure le live reload de React
      - REACT_APP_API_URL=http://${PRIVATE_IP_BACK}:3000
    stdin_open: true
    tty: true
    networks:
      - buildesp_network

networks:
  buildesp_network:
    external: true
