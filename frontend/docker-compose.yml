version: '3.8'

services:
  frontend:
    build:
      context: ./frontend/app  # Assurez-vous que vous avez bien le bon chemin
      dockerfile: Dockerfile
    ports:
      - "80:3000"
    image: stephb421/buildesp-app:latest
    volumes:
      - ./frontend/app:/app # Mount the app directory for live reloading
      - /app/node_modules # Avoid overwriting node_modules inside the container
    environment:
      - CHOKIDAR_USEPOLLING=true # Ensure React watches file changes for live reload
      - REACT_APP_API_URL=http://${PRIVATE_IP_BACK}:3000 # üîπ Utilisation de l'IP priv√©e du backend
    stdin_open: true
    tty: true
    networks:
      - buildesp_network

# Retirez tous les autres services non n√©cessaires (prometheus, redis, cadvisor, etc.)

volumes:
  # Grafana, Redis et autres volumes sont supprim√©s car ils ne sont plus utilis√©s
  # grafana-data:
  # grafana-conf:

networks:
  buildesp_network:
    external: true
